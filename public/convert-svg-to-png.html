<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convert SVG Icons to PNG</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        .icon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .icon-item {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
        }
        canvas {
            border: 1px solid #ccc;
            margin: 10px 0;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            background: #16a34a;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background: #15803d;
        }
    </style>
</head>
<body>
    <h1>Convert SVG Icons to PNG for PWA</h1>
    <p>This tool converts the SVG placeholder icons to PNG format required for PWA installation.</p>
    
    <div class="icon-grid" id="iconGrid"></div>
    
    <button onclick="convertAll()">Convert All to PNG</button>
    
    <script>
        const sizes = [72, 96, 128, 144, 152, 192, 384, 512];
        
        function loadSVG(size) {
            return fetch(`/icon-${size}x${size}.svg`)
                .then(res => res.text())
                .catch(() => {
                    // Create a simple SVG if file doesn't exist
                    return `<svg width="${size}" height="${size}" xmlns="http://www.w3.org/2000/svg">
                        <rect width="${size}" height="${size}" fill="#16a34a" rx="${size * 0.1}"/>
                        <text x="${size/2}" y="${size/2}" font-family="Arial" font-size="${size * 0.4}" fill="white" text-anchor="middle" dominant-baseline="middle" font-weight="bold">SC</text>
                    </svg>`;
                });
        }
        
        function svgToPng(svgString, size) {
            return new Promise((resolve) => {
                const img = new Image();
                const svgBlob = new Blob([svgString], { type: 'image/svg+xml;charset=utf-8' });
                const url = URL.createObjectURL(svgBlob);
                
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    canvas.width = size;
                    canvas.height = size;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0);
                    
                    canvas.toBlob((blob) => {
                        URL.revokeObjectURL(url);
                        resolve(blob);
                    }, 'image/png');
                };
                
                img.src = url;
            });
        }
        
        async function convertAll() {
            for (const size of sizes) {
                try {
                    const svg = await loadSVG(size);
                    const pngBlob = await svgToPng(svg, size);
                    
                    const url = URL.createObjectURL(pngBlob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `icon-${size}x${size}.png`;
                    a.click();
                    URL.revokeObjectURL(url);
                    
                    console.log(`Converted icon-${size}x${size}.png`);
                } catch (error) {
                    console.error(`Error converting ${size}x${size}:`, error);
                }
            }
            alert('All icons converted! Place them in the public/ directory.');
        }
        
        // Display preview
        sizes.forEach(size => {
            const div = document.createElement('div');
            div.className = 'icon-item';
            div.innerHTML = `
                <h3>${size}x${size}</h3>
                <img src="/icon-${size}x${size}.svg" width="${Math.min(size, 100)}" height="${Math.min(size, 100)}" alt="${size}x${size}">
            `;
            document.getElementById('iconGrid').appendChild(div);
        });
    </script>
</body>
</html>
